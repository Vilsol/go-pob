import{c as ie,a as p,t as E,b as rt}from"../chunks/disclose-version.boCT8-mN.js";import{l as Fe,n as nt,o as ot,q as lt,v as it,w as Ae,x as st,y as Ve,m as ze,z as Ye,A as Je,B as Xe,C as Re,D as Be,E as Ne,f as ct,F as ut,G as ft,p as Pe,g as w,a as me,c as s,i as u,b as A,e as Ce,h as re,s as R,r as c,j as se,H as dt,I as vt}from"../chunks/runtime.LiVz1aeE.js";import{s as Q}from"../chunks/render.CHZTRx_f.js";import{i as K,b as mt}from"../chunks/this.BOTMusHW.js";import{s as pt}from"../chunks/snippet.BIfwRIVK.js";import{r as gt,s as te}from"../chunks/attributes.BN4LPk7_.js";import{a as be,d as Ee,s as bt}from"../chunks/props.CgGGVFgu.js";import{s as Te,a as we,b as ae}from"../chunks/store.Bh8AggrJ.js";import{b as Ge,G as St}from"../chunks/cache.BSfGHtbM.js";import{N as _t}from"../chunks/NumberInput.Dg48jHiX.js";import{s as G,c as pe,l as V,f as je,o as Ze,p as Oe,a as ht}from"../chunks/global.DtJTI8bA.js";import{w as De,g as We}from"../chunks/index.B8tINEtp.js";import{e as _e,i as he}from"../chunks/each.DvyGQds8.js";import{c as r}from"../chunks/colors.DCgE6yJT.js";import{b as ve,a as Pt}from"../chunks/paths.BBr1ctjU.js";import{o as Ct}from"../chunks/index-client.wZdNs1fV.js";import{b as xt}from"../chunks/input.rdP5Bo0j.js";import{i as wt}from"../chunks/lifecycle.B0c9Fntj.js";import{c as Dt}from"../chunks/svelte-component.HvSMzx5C.js";const He=0,Ie=1,$e=2;function qe(t,e,f,v,_){Fe&&nt();var o=t,g=ot(),C=ft,d,n,a,b,m=(g?Ve:ze)(void 0),T=(g?Ve:ze)(void 0),h=!1;function y(i,P){h=!0,P&&(Ye(l),Je(l),Xe(C)),i===He&&f&&(n?Re(n):n=Be(()=>f(o))),i===Ie&&v&&(a?Re(a):a=Be(()=>v(o,m))),i===$e&&_&&(b?Re(b):b=Be(()=>_(o,T))),i!==He&&n&&Ne(n,()=>n=null),i!==Ie&&a&&Ne(a,()=>a=null),i!==$e&&b&&Ne(b,()=>b=null),P&&(Xe(null),Je(null),Ye(null),ct())}var l=lt(()=>{if(d!==(d=e())){if(it(d)){var i=d;h=!1,i.then(P=>{i===d&&(Ae(m,P),y(Ie,!0))},P=>{i===d&&(Ae(T,P),y($e,!0))}),Fe||st(()=>{h||y(He,!0)})}else Ae(m,d),y(Ie,!1);return()=>d=null}});Fe&&(o=ut)}var Tt=E("<option>Ascendant</option>"),It=E("<option>Juggernaut</option> <option>Berserker</option> <option>Chieftain</option>",1),Et=E("<option>Raider</option> <option>Deadeye</option> <option>Pathfinder</option>",1),yt=E("<option>Occultist</option> <option>Elementalist</option> <option>Necromancer</option>",1),Mt=E("<option>Slayer</option> <option>Gladiator</option> <option>Champion</option>",1),kt=E("<option>Inquisitor</option> <option>Hierophant</option> <option>Guardian</option>",1),Lt=E("<option>Assassin</option> <option>Trickster</option> <option>Saboteur</option>",1),Ft=E('<div class="flex flex-row w-screen border-b-2 border-white bg-neutral-800 min-h-[3em]"><div class="flex flex-row justify-between border-r-2 border-white p-2 flex-1 items-center"><div class="flex flex-row gap-3 items-center"><button class="container">&lt;&lt; Back</button> <div class="flex flex-row items-center"><span>Current Build:</span> <div class="ml-2 container">Unnamed build</div></div> <button class="container">Save</button> <button class="container">Save As</button></div> <div class="container h-fit"><span>0 / 123</span> <span class="ml-3">0 / 8</span></div></div> <div class="flex flex-row p-2 flex-1 items-center gap-3"><!> <div class="container select-wrapper"><select class="input"><option>Duelist</option><option>Marauder</option><option>Ranger</option><option>Scion</option><option>Shadow</option><option>Templar</option><option>Witch</option></select></div> <div class="container select-wrapper"><select class="input"><option>None</option><!></select></div></div></div>');function At(t,e){Pe(e,!0);const f=Te(),v=()=>ae(pe,"$currentBuild",f),_=()=>ae(m,"$currentLevel",f),o=()=>ae(a,"$currentClass",f),g=()=>ae(b,"$currentAscendancy",f);let C=re(!0),d=re(!0),n=re(!0);const a=De(),b=De(),m=De(1);a.subscribe(async S=>{var x,L;w(C)||!S||(await((x=G)==null?void 0:x.SetClass(S)),await((L=G)==null?void 0:L.SetAscendancy("None")),pe.set(v()))}),b.subscribe(async S=>{var x;w(d)||!S||(await((x=G)==null?void 0:x.SetAscendancy(S)),pe.set(v()))}),m.subscribe(async S=>{var x;w(n)||(await((x=G)==null?void 0:x.SetLevel(S)),pe.set(v()))}),me(()=>{var S,x,L;(L=(x=(S=v())==null?void 0:S.Build)==null?void 0:x.ClassName)==null||L.then(Z=>{R(C,!0),a.set(Z),R(C,!1)}).catch(V)}),me(()=>{var S,x;(x=(S=v())==null?void 0:S.Build)==null||x.AscendClassName.then(L=>{R(d,!0),b.set(L),R(d,!1)}).catch(V)}),me(()=>{var S,x;(x=(S=v())==null?void 0:S.Build)==null||x.Level.then(L=>{R(n,!0),m.set(L),R(n,!1)}).catch(V)});var T=Ft(),h=s(u(T),2),y=u(h);_t(y,{prefix:"Level:",min:1,max:100,get value(){return _()},set value(S){we(m,be(S))}});var l=s(y,2),i=u(l),P=u(i);P.value=(P.__value="Duelist")==null?"":"Duelist";var I=s(P);I.value=(I.__value="Marauder")==null?"":"Marauder";var D=s(I);D.value=(D.__value="Ranger")==null?"":"Ranger";var k=s(D);k.value=(k.__value="Scion")==null?"":"Scion";var H=s(k);H.value=(H.__value="Shadow")==null?"":"Shadow";var Y=s(H);Y.value=(Y.__value="Templar")==null?"":"Templar";var ce=s(Y);ce.value=(ce.__value="Witch")==null?"":"Witch",c(i),c(l);var ue=s(l,2),ne=u(ue),oe=u(ne);oe.value=(oe.__value="None")==null?"":"None";var ge=s(oe);K(ge,()=>o()==="Scion",S=>{var x=Tt();x.value=(x.__value="Ascendant")==null?"":"Ascendant",p(S,x)},S=>{var x=ie(),L=A(x);K(L,()=>o()==="Marauder",Z=>{var U=It(),B=A(U);B.value=(B.__value="Juggernaut")==null?"":"Juggernaut";var $=s(B,2);$.value=($.__value="Berserker")==null?"":"Berserker";var j=s($,2);j.value=(j.__value="Chieftain")==null?"":"Chieftain",p(Z,U)},Z=>{var U=ie(),B=A(U);K(B,()=>o()==="Ranger",$=>{var j=Et(),z=A(j);z.value=(z.__value="Raider")==null?"":"Raider";var J=s(z,2);J.value=(J.__value="Deadeye")==null?"":"Deadeye";var ee=s(J,2);ee.value=(ee.__value="Pathfinder")==null?"":"Pathfinder",p($,j)},$=>{var j=ie(),z=A(j);K(z,()=>o()==="Witch",J=>{var ee=yt(),fe=A(ee);fe.value=(fe.__value="Occultist")==null?"":"Occultist";var M=s(fe,2);M.value=(M.__value="Elementalist")==null?"":"Elementalist";var N=s(M,2);N.value=(N.__value="Necromancer")==null?"":"Necromancer",p(J,ee)},J=>{var ee=ie(),fe=A(ee);K(fe,()=>o()==="Duelist",M=>{var N=Mt(),W=A(N);W.value=(W.__value="Slayer")==null?"":"Slayer";var q=s(W,2);q.value=(q.__value="Gladiator")==null?"":"Gladiator";var F=s(q,2);F.value=(F.__value="Champion")==null?"":"Champion",p(M,N)},M=>{var N=ie(),W=A(N);K(W,()=>o()==="Templar",q=>{var F=kt(),X=A(F);X.value=(X.__value="Inquisitor")==null?"":"Inquisitor";var O=s(X,2);O.value=(O.__value="Hierophant")==null?"":"Hierophant";var le=s(O,2);le.value=(le.__value="Guardian")==null?"":"Guardian",p(q,F)},q=>{var F=ie(),X=A(F);K(X,()=>o()==="Shadow",O=>{var le=Lt(),de=A(le);de.value=(de.__value="Assassin")==null?"":"Assassin";var xe=s(de,2);xe.value=(xe.__value="Trickster")==null?"":"Trickster";var Ue=s(xe,2);Ue.value=(Ue.__value="Saboteur")==null?"":"Saboteur",p(O,le)},null,!0),p(q,F)},!0),p(M,N)},!0),p(J,ee)},!0),p($,j)},!0),p(Z,U)},!0),p(S,x)}),c(ne),c(ue),c(h),c(T),Ge(i,o,S=>we(a,S)),Ge(ne,g,S=>we(b,S)),p(t,T),Ce()}const Rt=[[{stat:"ActiveMinionLimit",label:"Active Minion Limit",fmt:"d"},{stat:"AverageHit",label:"Average Hit",fmt:".1f",compPercent:!0},{stat:"AverageDamage",label:"Average Damage",fmt:".1f",compPercent:!0,flag:"attack"},{stat:"Speed",label:"Attack Rate",fmt:".2f",compPercent:!0,flag:"attack",condFunc:(t,e)=>t>0&&(e.TriggerTime||0)==0},{stat:"Speed",label:"Cast Rate",fmt:".2f",compPercent:!0,flag:"spell",condFunc:(t,e)=>t>0&&(e.TriggerTime||0)==0},{stat:"ServerTriggerRate",label:"Trigger Rate",fmt:".2f",compPercent:!0,condFunc:(t,e)=>(e.TriggerTime||0)!=0},{stat:"Speed",label:"Effective Trigger Rate",fmt:".2f",compPercent:!0,condFunc:(t,e)=>(e.TriggerTime||0)!=0&&e.ServerTriggerRate!=e.Speed},{stat:"WarcryCastTime",label:"Cast Time",fmt:".2fs",compPercent:!0,lowerIsBetter:!0,flag:"warcry"},{stat:"HitSpeed",label:"Hit Rate",fmt:".2f",compPercent:!0,condFunc:(t,e)=>!e.TriggerTime},{stat:"TrapThrowingTime",label:"Trap Throwing Time",fmt:".2fs",compPercent:!0,lowerIsBetter:!0},{stat:"TrapCooldown",label:"Trap Cooldown",fmt:".3fs",lowerIsBetter:!0},{stat:"MineLayingTime",label:"Mine Throwing Time",fmt:".2fs",compPercent:!0,lowerIsBetter:!0},{stat:"TotemPlacementTime",label:"Totem Placement Time",fmt:".2fs",compPercent:!0,lowerIsBetter:!0},{stat:"PreEffectiveCritChance",label:"Crit Chance",fmt:".2f%%"},{stat:"CritChance",label:"Effective Crit Chance",fmt:".2f%%",condFunc:(t,e)=>t!=e.PreEffectiveCritChance},{stat:"CritMultiplier",label:"Crit Multiplier",fmt:"d%%",pc:!0,condFunc:(t,e)=>(e.CritChance||0)>0},{stat:"HitChance",label:"Hit Chance",fmt:".0f%%",flag:"attack"},{stat:"TotalDPS",label:"Total DPS",fmt:".1f",compPercent:!0,flag:"notAverage"},{stat:"TotalDPS",label:"Total DPS",fmt:".1f",compPercent:!0,flag:"showAverage",condFunc:(t,e)=>(e.TriggerTime||0)!=0},{stat:"TotalDot",label:"DoT DPS",fmt:".1f",compPercent:!0},{stat:"WithDotDPS",label:"Total DPS inc. DoT",fmt:".1f",compPercent:!0,flag:"notAverage",condFunc:(t,e)=>t!=e.TotalDPS&&(e.PoisonDPS||0)==0&&(e.IgniteDPS||0)==0&&(e.ImpaleDPS||0)==0&&(e.BleedDPS||0)==0},{stat:"BleedDPS",label:"Bleed DPS",fmt:".1f",compPercent:!0},{stat:"BleedDamage",label:"Total Damage per Bleed",fmt:".1f",compPercent:!0,flag:"showAverage"},{stat:"WithBleedDPS",label:"Total DPS inc. Bleed",fmt:".1f",compPercent:!0,flag:"notAverage",condFunc:(t,e)=>t!=e.TotalDPS&&(e.TotalDot||0)==0&&(e.PoisonDPS||0)==0&&(e.ImpaleDPS||0)==0&&(e.IgniteDPS||0)==0},{stat:"IgniteDPS",label:"Ignite DPS",fmt:".1f",compPercent:!0},{stat:"IgniteDamage",label:"Total Damage per Ignite",fmt:".1f",compPercent:!0,flag:"showAverage"},{stat:"WithIgniteDPS",label:"Total DPS inc. Ignite",fmt:".1f",compPercent:!0,flag:"notAverage",condFunc:(t,e)=>t!=e.TotalDPS&&(e.TotalDot||0)==0&&(e.PoisonDPS||0)==0&&(e.ImpaleDPS||0)==0&&(e.BleedDPS||0)==0},{stat:"WithIgniteAverageDamage",label:"Average Dmg. inc. Ignite",fmt:".1f",compPercent:!0},{stat:"PoisonDPS",label:"Poison DPS",fmt:".1f",compPercent:!0},{stat:"PoisonDamage",label:"Total Damage per Poison",fmt:".1f",compPercent:!0},{stat:"WithPoisonDPS",label:"Total DPS inc. Poison",fmt:".1f",compPercent:!0,flag:"notAverage",condFunc:(t,e)=>t!=e.TotalDPS&&(e.TotalDot||0)==0&&(e.IgniteDPS||0)==0&&(e.ImpaleDPS||0)==0&&(e.BleedDPS||0)==0},{stat:"DecayDPS",label:"Decay DPS",fmt:".1f",compPercent:!0},{stat:"TotalDotDPS",label:"Total DoT DPS",fmt:".1f",compPercent:!0,condFunc:(t,e)=>t!=e.TotalDot&&t!=e.ImpaleDPS&&t!=e.TotalPoisonDPS&&t!=(e.TotalIgniteDPS||e.IgniteDPS)&&t!=e.BleedDPS},{stat:"ImpaleDPS",label:"Impale Damage",fmt:".1f",compPercent:!0,flag:"showAverage"},{stat:"WithImpaleDPS",label:"Damage inc. Impale",fmt:".1f",compPercent:!0,flag:"showAverage",condFunc:(t,e)=>t!=e.TotalDPS&&(e.TotalDot||0)==0&&(e.IgniteDPS||0)==0&&(e.PoisonDPS||0)==0&&(e.BleedDPS||0)==0},{stat:"ImpaleDPS",label:"Impale DPS",fmt:".1f",compPercent:!0,flag:"notAverage"},{stat:"WithImpaleDPS",label:"Total DPS inc. Impale",fmt:".1f",compPercent:!0,flag:"notAverage",condFunc:(t,e)=>t!=e.TotalDPS&&(e.TotalDot||0)==0&&(e.IgniteDPS||0)==0&&(e.PoisonDPS||0)==0&&(e.BleedDPS||0)==0},{stat:"MirageDPS",label:"Total Mirage DPS",fmt:".1f",compPercent:!0,condFunc:t=>t>0},{stat:"CullingDPS",label:"Culling DPS",fmt:".1f",compPercent:!0,condFunc:(t,e)=>(e.CullingDPS||0)>0},{stat:"CombinedDPS",label:"Combined DPS",fmt:".1f",compPercent:!0,flag:"notAverage",condFunc:(t,e)=>t!=(e.TotalDPS||0)+(e.TotalDot||0)&&t!=e.WithImpaleDPS&&t!=e.WithPoisonDPS&&t!=e.WithIgniteDPS&&t!=e.WithBleedDPS},{stat:"CombinedAvg",label:"Combined Total Damage",fmt:".1f",compPercent:!0,flag:"showAverage",condFunc:(t,e)=>t!=e.AverageDamage&&(e.TotalDot||0)==0&&(t!=e.WithPoisonDPS||t!=e.WithIgniteDPS||t!=e.WithBleedDPS)},{stat:"Cooldown",label:"Skill Cooldown",fmt:".3fs",lowerIsBetter:!0},{stat:"SealCooldown",label:"Seal Gain Frequency",fmt:".2fs",lowerIsBetter:!0},{stat:"SealMax",label:"Max Number of Seals",fmt:"d"},{stat:"TimeMaxSeals",label:"Time to Gain Max Seals",fmt:".2fs",lowerIsBetter:!0},{stat:"AreaOfEffectRadius",label:"AoE Radius",fmt:"d"},{stat:"BrandAttachmentRange",label:"Attachment Range",fmt:"d",flag:"brand"},{stat:"BrandTicks",label:"Activations per Brand",fmt:"d",flag:"brand"},{stat:"ManaCost",label:"Mana Cost",fmt:"d",color:r.MANA,compPercent:!0,lowerIsBetter:!0,condFunc:t=>t>0},{stat:"LifeCost",label:"Life Cost",fmt:"d",color:r.LIFE,compPercent:!0,lowerIsBetter:!0,condFunc:t=>t>0},{stat:"ESCost",label:"Energy Shield Cost",fmt:"d",color:r.ES,compPercent:!0,lowerIsBetter:!0,condFunc:t=>t>0},{stat:"RageCost",label:"Rage Cost",fmt:"d",color:r.RAGE,compPercent:!0,lowerIsBetter:!0,condFunc:t=>t>0},{stat:"ManaPercentCost",label:"Mana Cost",fmt:"d%%",color:r.MANA,compPercent:!0,lowerIsBetter:!0,condFunc:t=>t>0},{stat:"LifePercentCost",label:"Life Cost",fmt:"d%%",color:r.LIFE,compPercent:!0,lowerIsBetter:!0,condFunc:t=>t>0},{stat:"ManaPerSecondCost",label:"Mana Cost",fmt:".2f/s",color:r.MANA,compPercent:!0,lowerIsBetter:!0,condFunc:t=>t>0},{stat:"LifePerSecondCost",label:"Life Cost",fmt:".2f/s",color:r.LIFE,compPercent:!0,lowerIsBetter:!0,condFunc:t=>t>0},{stat:"ManaPercentPerSecondCost",label:"Mana Cost",fmt:".2f%%/s",color:r.MANA,compPercent:!0,lowerIsBetter:!0,condFunc:t=>t>0},{stat:"LifePercentPerSecondCost",label:"Life Cost",fmt:".2f%%/s",color:r.LIFE,compPercent:!0,lowerIsBetter:!0,condFunc:t=>t>0},{stat:"ESPerSecondCost",label:"Energy Shield Cost",fmt:".2f/s",color:r.ES,compPercent:!0,lowerIsBetter:!0,condFunc:t=>t>0},{stat:"ESPercentPerSecondCost",label:"Energy Shield Cost",fmt:".2f%%/s",color:r.ES,compPercent:!0,lowerIsBetter:!0,condFunc:t=>t>0}],[{stat:"Str",label:"Strength",color:r.STRENGTH,fmt:"d"},{stat:"ReqStr",label:"Strength Required",color:r.STRENGTH,fmt:"d",lowerIsBetter:!0,condFunc:(t,e)=>t>e.Str,warnFunc:()=>"You do not meet the Strength requirement"},{stat:"Dex",label:"Dexterity",color:r.DEXTERITY,fmt:"d"},{stat:"ReqDex",label:"Dexterity Required",color:r.DEXTERITY,fmt:"d",lowerIsBetter:!0,condFunc:(t,e)=>t>e.Dex,warnFunc:()=>"You do not meet the Dexterity requirement"},{stat:"Int",label:"Intelligence",color:r.INTELLIGENCE,fmt:"d"},{stat:"ReqInt",label:"Intelligence Required",color:r.INTELLIGENCE,fmt:"d",lowerIsBetter:!0,condFunc:(t,e)=>t>e.Int,warnFunc:()=>"You do not meet the Intelligence requirement"},{stat:"Omni",label:"Omniscience",color:r.RARE,fmt:"d"},{stat:"ReqOmni",label:"Omniscience Required",color:r.RARE,fmt:"d",lowerIsBetter:!0,condFunc:(t,e)=>t>(e.Omni||0),warnFunc:()=>"You do not meet the Omniscience requirement"}],[{stat:"Devotion",label:"Devotion",color:r.RARE,fmt:"d"}],[{stat:"TotalEHP",label:"Effective Hit Pool",fmt:".0f",compPercent:!0},{stat:"PhysicalMaximumHitTaken",label:"Phys Max Hit",fmt:".0f",color:r.PHYS,compPercent:!0},{stat:"LightningMaximumHitTaken",label:"Elemental Max Hit",fmt:".0f",color:r.LIGHTNING,compPercent:!0,condFunc:(t,e)=>e.LightningMaximumHitTaken==e.ColdMaximumHitTaken&&e.LightningMaximumHitTaken==e.FireMaximumHitTaken},{stat:"FireMaximumHitTaken",label:"Fire Max Hit",fmt:".0f",color:r.FIRE,compPercent:!0,condFunc:(t,e)=>e.LightningMaximumHitTaken!=e.ColdMaximumHitTaken||e.LightningMaximumHitTaken!=e.FireMaximumHitTaken},{stat:"ColdMaximumHitTaken",label:"Cold Max Hit",fmt:".0f",color:r.COLD,compPercent:!0,condFunc:(t,e)=>e.LightningMaximumHitTaken!=e.ColdMaximumHitTaken||e.LightningMaximumHitTaken!=e.FireMaximumHitTaken},{stat:"LightningMaximumHitTaken",label:"Lightning Max Hit",fmt:".0f",color:r.LIGHTNING,compPercent:!0,condFunc:(t,e)=>e.LightningMaximumHitTaken!=e.ColdMaximumHitTaken||e.LightningMaximumHitTaken!=e.FireMaximumHitTaken},{stat:"ChaosMaximumHitTaken",label:"Chaos Max Hit",fmt:".0f",color:r.CHAOS,compPercent:!0}],[{stat:"Life",label:"Total Life",fmt:"d",color:r.LIFE,compPercent:!0},{stat:"Spec:LifeInc",label:"%Inc Life from Tree",fmt:"d%%",color:r.LIFE,condFunc:(t,e)=>t>0&&e.Life>1},{stat:"LifeUnreserved",label:"Unreserved Life",fmt:"d",color:r.LIFE,condFunc:(t,e)=>t<e.Life,compPercent:!0,warnFunc:t=>t<0&&"Your unreserved Life is negative"},{stat:"LifeRecoverable",label:"Life Recoverable",fmt:"d",color:r.LIFE,condFunc:(t,e)=>t<e.LifeUnreserved},{stat:"LifeUnreservedPercent",label:"Unreserved Life",fmt:"d%%",color:r.LIFE,condFunc:t=>t<100},{stat:"LifeRegen",label:"Life Regen",fmt:".1f",color:r.LIFE},{stat:"LifeLeechGainRate",label:"Life Leech/On Hit Rate",fmt:".1f",color:r.LIFE,compPercent:!0},{stat:"LifeLeechGainPerHit",label:"Life Leech/Gain per Hit",fmt:".1f",color:r.LIFE,compPercent:!0}],[{stat:"Mana",label:"Total Mana",fmt:"d",color:r.MANA,compPercent:!0},{stat:"Spec:ManaInc",label:"%Inc Mana from Tree",color:r.MANA,fmt:"d%%"},{stat:"ManaUnreserved",label:"Unreserved Mana",fmt:"d",color:r.MANA,condFunc:(t,e)=>t<e.Mana,compPercent:!0,warnFunc:t=>t<0&&"Your unreserved Mana is negative"},{stat:"ManaUnreservedPercent",label:"Unreserved Mana",fmt:"d%%",color:r.MANA,condFunc:t=>t<100},{stat:"ManaRegen",label:"Mana Regen",fmt:".1f",color:r.MANA},{stat:"ManaLeechGainRate",label:"Mana Leech/On Hit Rate",fmt:".1f",color:r.MANA,compPercent:!0},{stat:"ManaLeechGainPerHit",label:"Mana Leech/Gain per Hit",fmt:".1f",color:r.MANA,compPercent:!0}],[{stat:"TotalDegen",label:"Total Degen",fmt:".1f",lowerIsBetter:!0},{stat:"TotalNetRegen",label:"Total Net Regen",fmt:"+.1f"},{stat:"NetLifeRegen",label:"Net Life Regen",fmt:"+.1f",color:r.LIFE},{stat:"NetManaRegen",label:"Net Mana Regen",fmt:"+.1f",color:r.MANA},{stat:"NetEnergyShieldRegen",label:"Net Energy Shield Regen",fmt:"+.1f",color:r.ES}],[{stat:"Ward",label:"Ward",fmt:"d",color:r.WARD,compPercent:!0},{stat:"EnergyShield",label:"Energy Shield",fmt:"d",color:r.ES,compPercent:!0},{stat:"EnergyShieldRecoveryCap",label:"Recoverable ES",color:r.ES,fmt:"d",condFunc:t=>!!t},{stat:"Spec:EnergyShieldInc",label:"%Inc ES from Tree",color:r.ES,fmt:"d%%"},{stat:"EnergyShieldRegen",label:"Energy Shield Regen",color:r.ES,fmt:".1f"},{stat:"EnergyShieldLeechGainRate",label:"ES Leech/On Hit Rate",color:r.ES,fmt:".1f",compPercent:!0},{stat:"EnergyShieldLeechGainPerHit",label:"ES Leech/Gain per Hit",color:r.ES,fmt:".1f",compPercent:!0}],[{stat:"Evasion",label:"Evasion rating",fmt:"d",color:r.EVASION,compPercent:!0},{stat:"Spec:EvasionInc",label:"%Inc Evasion from Tree",color:r.EVASION,fmt:"d%%"},{stat:"MeleeEvadeChance",label:"Evade Chance",fmt:"d%%",color:r.EVASION,condFunc:(t,e)=>t>0&&e.MeleeEvadeChance==e.ProjectileEvadeChance},{stat:"MeleeEvadeChance",label:"Melee Evade Chance",fmt:"d%%",color:r.EVASION,condFunc:(t,e)=>t>0&&e.MeleeEvadeChance!=e.ProjectileEvadeChance},{stat:"ProjectileEvadeChance",label:"Projectile Evade Chance",fmt:"d%%",color:r.EVASION,condFunc:(t,e)=>t>0&&e.MeleeEvadeChance!=e.ProjectileEvadeChance}],[{stat:"Armour",label:"Armour",fmt:"d",compPercent:!0},{stat:"Spec:ArmourInc",label:"%Inc Armour from Tree",fmt:"d%%"},{stat:"PhysicalDamageReduction",label:"Phys. Damage Reduction",fmt:"d%%"}],[{stat:"BlockChance",label:"Block Chance",fmt:"d%%",overCapStat:"BlockChanceOverCap"},{stat:"SpellBlockChance",label:"Spell Block Chance",fmt:"d%%",overCapStat:"SpellBlockChanceOverCap"},{stat:"AttackDodgeChance",label:"Attack Dodge Chance",fmt:"d%%",overCapStat:"AttackDodgeChanceOverCap"},{stat:"SpellDodgeChance",label:"Spell Dodge Chance",fmt:"d%%",overCapStat:"SpellDodgeChanceOverCap"},{stat:"SpellSuppressionChance",label:"Spell Suppression Chance",fmt:"d%%",overCapStat:"SpellSuppressionChanceOverCap"}],[{stat:"FireResist",label:"Fire Resistance",fmt:"d%%",color:r.FIRE,overCapStat:"FireResistOverCap"},{stat:"FireResistOverCap",label:"Fire Res. Over Max",fmt:"d%%",hideStat:!0},{stat:"ColdResist",label:"Cold Resistance",fmt:"d%%",color:r.COLD,overCapStat:"ColdResistOverCap"},{stat:"ColdResistOverCap",label:"Cold Res. Over Max",fmt:"d%%",hideStat:!0},{stat:"LightningResist",label:"Lightning Resistance",fmt:"d%%",color:r.LIGHTNING,overCapStat:"LightningResistOverCap"},{stat:"LightningResistOverCap",label:"Lightning Res. Over Max",fmt:"d%%",hideStat:!0},{stat:"ChaosResist",label:"Chaos Resistance",fmt:"d%%",color:r.CHAOS,condFunc:(t,e)=>!e.ChaosInoculation,overCapStat:"ChaosResistOverCap"},{stat:"ChaosResistOverCap",label:"Chaos Res. Over Max",fmt:"d%%",hideStat:!0},{label:"Chaos Resistance",val:"Immune",labelStat:"ChaosResist",color:r.CHAOS,condFunc:(t,e)=>e.ChaosInoculation>0}],[{stat:"EffectiveMovementSpeedMod",label:"Movement Speed Modifier",fmt:"+d%%",mod:!0}],[{stat:"FullDPS",label:"Full DPS",fmt:".1f",color:r.CURRENCY,compPercent:!0}],[{stat:"SkillDPS",label:"Skill DPS"}]];var et={},ye={},tt={},Me={};Object.defineProperty(Me,"__esModule",{value:!0});Me.boolean=void 0;const Bt=function(t){switch(Object.prototype.toString.call(t)){case"[object String]":return["true","t","yes","y","on","1"].includes(t.trim().toLowerCase());case"[object Number]":return t.valueOf()===1;case"[object Boolean]":return t.valueOf();default:return!1}};Me.boolean=Bt;var ke={};Object.defineProperty(ke,"__esModule",{value:!0});ke.isBooleanable=void 0;const Nt=function(t){switch(Object.prototype.toString.call(t)){case"[object String]":return["true","t","yes","y","on","1","false","f","no","n","off","0"].includes(t.trim().toLowerCase());case"[object Number]":return[0,1].includes(t.valueOf());case"[object Boolean]":return!0;default:return!1}};ke.isBooleanable=Nt;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isBooleanable=t.boolean=void 0;const e=Me;Object.defineProperty(t,"boolean",{enumerable:!0,get:function(){return e.boolean}});const f=ke;Object.defineProperty(t,"isBooleanable",{enumerable:!0,get:function(){return f.isBooleanable}})})(tt);var Le={};Object.defineProperty(Le,"__esModule",{value:!0});Le.tokenize=void 0;const Ot=/(?:%(?<flag>([+0-]|-\+))?(?<width>\d+)?(?<position>\d+\$)?(?<precision>\.\d+)?(?<conversion>[%BCESb-iosux]))|(\\%)/g,Ht=t=>{let e;const f=[];let v=0,_=0,o=null;for(;(e=Ot.exec(t))!==null;){e.index>_&&(o={literal:t.slice(_,e.index),type:"literal"},f.push(o));const g=e[0];_=e.index+g.length,g==="\\%"||g==="%%"?o&&o.type==="literal"?o.literal+="%":(o={literal:"%",type:"literal"},f.push(o)):e.groups&&(o={conversion:e.groups.conversion,flag:e.groups.flag||null,placeholder:g,position:e.groups.position?Number.parseInt(e.groups.position,10)-1:v++,precision:e.groups.precision?Number.parseInt(e.groups.precision.slice(1),10):null,type:"placeholder",width:e.groups.width?Number.parseInt(e.groups.width,10):null},f.push(o))}return _<=t.length-1&&(o&&o.type==="literal"?o.literal+=t.slice(_):f.push({literal:t.slice(_),type:"literal"})),f};Le.tokenize=Ht;Object.defineProperty(ye,"__esModule",{value:!0});ye.createPrintf=void 0;const Ke=tt,$t=Le,Gt=(t,e)=>e.placeholder,jt=t=>{var e;const f=(o,g,C)=>C==="-"?o.padEnd(g," "):C==="-+"?((Number(o)>=0?"+":"")+o).padEnd(g," "):C==="+"?((Number(o)>=0?"+":"")+o).padStart(g," "):C==="0"?o.padStart(g,"0"):o.padStart(g," "),v=(e=t==null?void 0:t.formatUnboundExpression)!==null&&e!==void 0?e:Gt,_={};return(o,...g)=>{let C=_[o];C||(C=_[o]=$t.tokenize(o));let d="";for(const n of C)if(n.type==="literal")d+=n.literal;else{let a=g[n.position];if(a===void 0)d+=v(o,n,g);else if(n.conversion==="b")d+=Ke.boolean(a)?"true":"false";else if(n.conversion==="B")d+=Ke.boolean(a)?"TRUE":"FALSE";else if(n.conversion==="c")d+=a;else if(n.conversion==="C")d+=String(a).toUpperCase();else if(n.conversion==="i"||n.conversion==="d")a=String(Math.trunc(a)),n.width!==null&&(a=f(a,n.width,n.flag)),d+=a;else if(n.conversion==="e")d+=Number(a).toExponential();else if(n.conversion==="E")d+=Number(a).toExponential().toUpperCase();else if(n.conversion==="f")n.precision!==null&&(a=Number(a).toFixed(n.precision)),n.width!==null&&(a=f(String(a),n.width,n.flag)),d+=a;else if(n.conversion==="o")d+=(Number.parseInt(String(a),10)>>>0).toString(8);else if(n.conversion==="s")n.width!==null&&(a=f(String(a),n.width,n.flag)),d+=a;else if(n.conversion==="S")n.width!==null&&(a=f(String(a),n.width,n.flag)),d+=String(a).toUpperCase();else if(n.conversion==="u")d+=Number.parseInt(String(a),10)>>>0;else if(n.conversion==="x")a=(Number.parseInt(String(a),10)>>>0).toString(16),n.width!==null&&(a=f(String(a),n.width,n.flag)),d+=a;else throw new Error("Unknown format specifier.")}return d}};ye.createPrintf=jt;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.printf=t.createPrintf=void 0;const e=ye;Object.defineProperty(t,"createPrintf",{enumerable:!0,get:function(){return e.createPrintf}}),t.printf=e.createPrintf()})(et);const Se=De([]),at=t=>Se.set([...We(Se),t]);var Wt=E('<div class="flex flex-col gap-4"><fieldset class="border border-white bg-neutral-900 p-2 mt-4 min-w-[15vw]"><legend class="container">Application Options</legend> <div class="side-by-side-max-content w-full"><span>Font Scaling:</span> <div class="flex flex-row gap-1"><input type="range" min="6" max="18" step="0.5" class="slider"> <span> </span></div></div></fieldset> <div class="flex flex-row items-center justify-center"><button class="container">Close</button></div></div>');function qt(t,e){const f=Te(),v=()=>ae(je,"$fontScaling",f);var _=Wt(),o=u(_),g=s(u(o),2),C=s(u(g),2),d=u(C);gt(d);var n=s(d,2),a=u(n);c(n),c(C),c(g),c(o);var b=s(o,2),m=u(b);m.__click=function(...T){var h;(h=e.onclose)==null||h.apply(this,T)},c(b),c(_),se(()=>Q(a,`${v()??""}pt`)),xt(d,v,T=>we(je,T)),p(t,_)}Ee(["click"]);var Ut=E('<tr><td class="border border-neutral-600 p-2"> </td><td class="border border-neutral-600 p-2"> </td></tr>'),Vt=E('<table class="table-auto border-collapse border border-neutral-500"><tbody></tbody></table>'),zt=E('<tr><td class="border border-neutral-600 p-2"> </td><td class="border border-neutral-600 p-2"> </td></tr>'),Yt=E('<table class="table-auto border-collapse border border-neutral-500"><tbody></tbody></table>'),Jt=E('<div class="flex flex-col gap-4"><div class="flex flex-row gap-4"><fieldset class="border border-white bg-neutral-900"><legend class="container">Build Settings</legend> <!></fieldset> <fieldset class="border border-white bg-neutral-900"><legend class="container">Dependencies</legend> <!></fieldset></div> <div class="flex flex-row items-center justify-center"><button class="container">Close</button></div></div>');function Xt(t,e){Pe(e,!0);var f=Jt(),v=u(f),_=u(v),o=s(u(_),2);qe(o,()=>{var a;return(a=G)==null?void 0:a.BuildInfo()},null,(a,b)=>{var m=Vt(),T=u(m);_e(T,21,()=>{var h;return((h=w(b))==null?void 0:h.Settings)||[]},he,(h,y)=>{var l=Ut(),i=u(l),P=u(i);c(i);var I=s(i),D=u(I);c(I),c(l),se(()=>{Q(P,w(y).Key),Q(D,w(y).Value)}),p(h,l)}),c(T),c(m),p(a,m)}),c(_);var g=s(_,2),C=s(u(g),2);qe(C,()=>{var a;return(a=G)==null?void 0:a.BuildInfo()},null,(a,b)=>{var m=Yt(),T=u(m);_e(T,21,()=>{var h;return((h=w(b))==null?void 0:h.Deps)||[]},he,(h,y)=>{var l=zt(),i=u(l),P=u(i);c(i);var I=s(i),D=u(I);c(I),c(l),se(()=>{var k,H;Q(P,(k=w(y))==null?void 0:k.Path),Q(D,(H=w(y))==null?void 0:H.Version)}),p(h,l)}),c(T),c(m),p(a,m)}),c(g),c(v);var d=s(v,2),n=u(d);n.__click=function(...a){var b;(b=e.onclose)==null||b.apply(this,a)},c(d),c(f),p(t,f),Ce()}Ee(["click"]);const Kt=()=>{at({component:qt,props:{}})},Qt=()=>{at({component:Xt,props:{}})};var Zt=(t,e)=>R(e,!1),ea=E('<div class="h-full flex flex-col full-page relative"><button class="absolute -right-3 top-1/2 cursor-pointer font-bold">&gt;</button></div>'),ta=E("<option>&lt;No skills added yet&gt;</option>"),aa=E("<option> </option>"),ra=E('<div class="svelte-1bnpwee"> </div> <div class="svelte-1bnpwee"> </div>',1),na=E('<div class="side-by-side-sidebar svelte-1bnpwee"></div>'),oa=(t,e)=>R(e,!0),la=E('<div class="w-[25vw] min-w-[17em] max-w-[25em] h-full border-r-2 border-white flex flex-col bg-neutral-900 full-page relative"><div class="flex flex-col gap-3 border-b-2 border-white flex-1 p-2 sidebar-stat-wrapper svelte-1bnpwee"><div class="flex flex-col gap-2"><div class="flex flex-row gap-1"><a class="container min-w-fit flex-1 text-center">Import/Export Build</a> <a class="container min-w-fit flex-1 text-center">Notes</a> <a class="container min-w-fit flex-1 text-center">Config</a></div> <div class="flex flex-row gap-1"><a class="container min-w-fit flex-1 text-center">Tree</a> <a class="container min-w-fit flex-1 text-center">Skills</a> <a class="container min-w-fit flex-1 text-center">Items</a> <a class="container min-w-fit flex-1 text-center">Calcs</a></div></div> <div class="flex flex-col gap-1"><div>Main Skill:</div> <div class="container select-wrapper min-w-full"><select class="input w-full"><!></select></div></div> <div class="container min-w-full overflow-y-auto flex-1 flex flex-col gap-2.5 overflow-y-scroll"></div></div> <div class="flex flex-row p-2"><div class="flex flex-col flex-1 gap-2"><button class="container min-w-full flex-1">Options</button> <button class="container min-w-full flex-1">About</button></div> <div class="flex flex-col flex-1 items-center"><span class="flex-1 flex place-items-center">go-pob</span> <button class="flex-1 flex place-items-center cursor-pointer"><!></button></div></div> <button class="absolute -right-3.5 top-1/2 cursor-pointer font-bold">&lt;</button></div>');function ia(t,e){Pe(e,!0);const f=Te(),v=()=>ae(pe,"$currentBuild",f),_=()=>ae(m,"$mainSocketGroup",f),o=()=>ae(Ze,"$outputs",f),g=l=>l,C=(l,i,P)=>{const I=i*((l.pc||l.mod)&&100||1)-(l.mod&&100||0);let D=r.NEGATIVE;i>=0&&(D="#ffffff");let k=et.printf("%"+(l.fmt||"d"),I);return k=g(k),[k,D]},d=l=>{if(!l||!l.Output)return[];const i=[];for(const P of Rt){const I=[];for(const D of P){const k=D.stat;if(!k||!(k in l.Output))continue;const H=l.Output[k];if(D.condFunc&&!D.condFunc(H,l.Output)||D.flag&&l.SkillFlags&&l.SkillFlags[D.flag]!==!0)continue;D.warnFunc;const Y=C(D,H,D.overCapStat?l.Output[D.overCapStat]:void 0);I.push({label:D.label,labelColor:D.color||"#ffffff",value:Y[0],valueColor:Y[1]})}I.length>0&&i.push(I)}return i},n=be({});Ct(()=>{St().then(l=>{l.forEach(i=>{n[i.ID]=i})}).catch(V)});let a=re(1);me(()=>{var l,i,P;(P=(i=(l=v())==null?void 0:l.Skills)==null?void 0:i.ActiveSkillSet)==null||P.then(I=>{if(I<1){R(a,1);return}R(a,be(I))}).catch(V)}),me(()=>{console.log("ACTIVE:",w(a))});let b=re(be([]));me(()=>{var l,i,P,I,D;(D=(I=(P=(i=(l=v())==null?void 0:l.Skills)==null?void 0:i.SkillSets)==null?void 0:P[w(a)-1])==null?void 0:I.Skills)==null||D.then(async k=>{var Y,ce,ue,ne,oe,ge,S,x,L,Z;const H=[];for(let U=0;U<k.length;(U+=1)-1){let B=await((oe=(ne=(ue=(ce=(Y=v())==null?void 0:Y.Skills)==null?void 0:ce.SkillSets)==null?void 0:ue[w(a)-1])==null?void 0:ne.Skills)==null?void 0:oe[U].Label);if(B===""){const $=(Z=(L=(x=(S=(ge=v())==null?void 0:ge.Skills)==null?void 0:S.SkillSets)==null?void 0:x[w(a)-1])==null?void 0:L.Skills)==null?void 0:Z[U].Gems;if(await $)for(let j=0;j<await $.length;(j+=1)-1){const z=n[await $[j].GemID];!z||z.Support||(B!==""&&(B+=", "),B+=z.Base.Name)}else B="<No active skills>"}B&&H.push(B)}R(b,be(H))}).catch(V)});const m=De(-1);me(()=>{var l,i,P;(P=(i=(l=v())==null?void 0:l.Build)==null?void 0:i.MainSocketGroup)==null||P.then(I=>m.set(I-1)).catch(V)}),m.subscribe(l=>{var i;l>=0&&((i=G)==null||i.SetMainSocketGroup(l+1).catch(V)),pe.set(v())});let T=re(!1);var h=ie(),y=A(h);K(y,()=>w(T),l=>{var i=ea(),P=u(i);P.__click=[Zt,T],c(i),p(l,i)},l=>{var i=la(),P=u(i),I=u(P),D=u(I),k=u(D);te(k,"href",`${ve??""}/import`);var H=s(k,2);te(H,"href",`${ve??""}/notes`);var Y=s(H,2);te(Y,"href",`${ve??""}/configuration`),c(D);var ce=s(D,2),ue=u(ce);te(ue,"href",`${ve??""}/tree`);var ne=s(ue,2);te(ne,"href",`${ve??""}/skills`);var oe=s(ne,2);te(oe,"href",`${ve??""}/items`);var ge=s(oe,2);te(ge,"href",`${ve??""}/calcs`),c(ce),c(I);var S=s(I,2),x=s(u(S),2),L=u(x),Z=u(L);K(Z,()=>w(b).length===0,M=>{var N=ta();p(M,N)},M=>{var N=ie(),W=A(N);_e(W,17,()=>w(b),he,(q,F,X)=>{var O=aa();O.value=(O.__value=X)==null?"":X;var le=u(O);c(O),se(()=>Q(le,w(F))),p(q,O)}),p(M,N)}),c(L),c(x),c(S);var U=s(S,2);_e(U,5,()=>d(o()),he,(M,N)=>{var W=na();_e(W,21,()=>w(N),he,(q,F)=>{var X=ra(),O=A(X),le=u(O);c(O);var de=s(O,2),xe=u(de);c(de),se(()=>{te(O,"style",`color: ${w(F).labelColor??""}`),Q(le,`${w(F).label??""}:`),te(de,"style",`color: ${w(F).valueColor??""}`),Q(xe,w(F).value)}),p(q,X)}),c(W),p(M,W)}),c(U),c(P);var B=s(P,2),$=u(B),j=u($);j.__click=[Kt],dt(2),c($);var z=s($,2),J=s(u(z),2);J.__click=[Qt];var ee=u(J);qe(ee,()=>{var M;return(M=G)==null?void 0:M.BuildInfo()},null,(M,N)=>{var W=rt();se(()=>{var q,F;return Q(W,`Version: ${((F=(q=w(N))==null?void 0:q.Main)==null?void 0:F.Version)??""}`)}),p(M,W)}),c(J),c(z),c(B);var fe=s(B,2);fe.__click=[oa,T],c(i),Ge(L,_,M=>we(m,M)),p(l,i)}),p(t,h),Ce()}Ee(["click"]);const Qe=(t,e,f)=>{e.config.backdropClose&&t.target===w(f)&&e.closeOverlay()};var sa=E('<button class="overlay svelte-e3qg0g"><!></button>');function ca(t,e){Pe(e,!0);let f=re(void 0);var v=sa();mt(v,o=>R(f,o),()=>w(f)),v.__click=[Qe,e,f],v.__keyup=[Qe,e,f];var _=u(v);Dt(_,()=>e.config.component,(o,g)=>{g(o,bt({get onclose(){return e.closeOverlay}},()=>e.config.props))}),c(v),p(t,v),Ce()}Ee(["click","keyup"]);function ua(t,e){Pe(e,!1);const f=Te(),v=()=>ae(Se,"$overlays",f),_=C=>{We(Se).splice(C,1),Se.set(We(Se))};wt();var o=ie(),g=A(o);_e(g,1,v,he,(C,d,n)=>{ca(C,{get config(){return w(d)},closeOverlay:()=>_(n)})}),p(t,o),Ce()}var fa=E("<br> ",1),da=E('<div class="flex flex-row justify-center h-full"><div class="flex flex-col justify-center text-5xl text-center"> <!></div></div>'),va=E('<!> <div class="flex flex-row h-full full-page"><!> <div class="h-full w-full overflow-hidden"><!></div></div> <!>',1),ma=E('<div class="w-screen h-screen max-w-screen max-h-screen overflow-hidden flex flex-col"><!></div>');function Aa(t,e){Pe(e,!0);const f=Te(),v=()=>ae(je,"$fontScaling",f);let _=re(!0),o=re("Initializing..."),g=re("");!G||G===null?R(o,"Failed to initialize worker"):G.booted.then(n=>{if(n){R(_,!1);return}fetch(Pt+"/go-pob.wasm").then(a=>a.arrayBuffer()).then(a=>{var b;(b=G)==null||b.boot(a,Oe(m=>{Ze.set(m)}),Oe(pe)).then(async()=>{var m,T;console.log("worker booted"),R(o,"Loading data..."),await((m=G)==null?void 0:m.loadData(Oe(async h=>{R(o,"Loading data:"),R(g,be(h))}))),R(_,!1),(T=G)==null||T.ImportCode(ht).then(()=>{var h;(h=G)==null||h.Tick("importBuildFromCode").catch(V)}).catch(V)}).catch(V)}).catch(V)}).catch(V);var C=ma(),d=u(C);K(d,()=>w(_),n=>{var a=da(),b=u(a),m=u(b),T=s(m);K(T,()=>w(g)!=="",h=>{var y=fa(),l=s(A(y));se(()=>Q(l,` ${w(g)??""}`)),p(h,y)}),c(b),c(a),se(()=>Q(m,`${w(o)??""} `)),p(n,a)},n=>{var a=va(),b=A(a);At(b,{});var m=s(b,2),T=u(m);ia(T,{});var h=s(T,2),y=u(h);pt(y,()=>e.children??vt),c(h),c(m);var l=s(m,2);ua(l,{}),p(n,a)}),c(C),se(()=>te(C,"style",`font-size: ${v()??""}pt`)),p(t,C),Ce()}export{Aa as component};
